@using System.Text

@{
    ViewBag.Title = "Telemetry data";

    var begining = new StringBuilder();
    begining.Append(@"<script type='text/javascript'>
                    google.charts.load('current', {'packages':['corechart', 'bar']});</script>

                    <script type='text/javascript'>
google.charts.setOnLoadCallback(drawVisualization);
                    function drawVisualization() {
                    var data = google.visualization.arrayToDataTable([
                    ['Lap', 'CH1', 'CH2', 'Average'],");


    var end = new StringBuilder();
    end.Append(
    "var options = { title : 'Tyre Temperatures for CH1 and CH2', vAxis: {title: 'Temperatures'}, curveType: 'function', hAxis: {title: 'Laps'} };");
    end.Append(
        " var chart = new google.visualization.LineChart(document.getElementById('chart_div'));  chart.draw(data, options); ");

    end.Append("var barchart_options = {title:'',height:2000,bars: 'horizontal', vAxis: {title: 'Temperature'} }; var barchart = new google.charts.Bar(document.getElementById('barchart_div')); barchart.draw(data, barchart_options); } ");
    end.Append(" </script>");

    @Html.Raw(begining)
    @Html.Raw(ViewBag.chartstring)
    @Html.Raw(end)
}


<h2>@ViewBag.Title</h2>
<div id="chart_div" style="width: 100%; height: 600px;">
</div>
<td><div id="barchart_div" style="border: 1px solid #ccc"></div></td>